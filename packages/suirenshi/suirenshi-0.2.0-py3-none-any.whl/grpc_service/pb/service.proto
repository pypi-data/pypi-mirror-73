syntax = "proto3";

option java_multiple_files = true;

package service;

service Inference {
    rpc Inference (InferenceRequest) returns (InferenceReply) {
    }
}

message InferenceRequest {
    int32 photo_id = 1;
    int32 product_id = 2;
    int32 channel_id = 3;
    int32 width = 4;
    int32 height = 5;
    bytes encoded_image = 6;
    int32 x_offset = 7;
    int32 y_offset = 8;
}

message SingleInferenceReply {
    string class_name = 1;
    float xmin = 2;
    float ymin = 3;
    float bb_width = 4;
    float bb_height = 5;
    float score = 6;
    float length = 7;
    float width = 8;
    float pixel_area = 9;
    float gradients = 10;
    float contrast = 11;
    float brightness = 12;
    float top_brightness = 13;
    float low_brightness = 14;
    bytes mask = 15;
    int32 mask_width = 16;
    int32 mask_height = 17;
}

message InferenceReply {
    int32 num_detections = 1;
    int32 photo_id = 2;
    int32 product_id = 3;
    int32 channel_id = 4;
    repeated SingleInferenceReply singleInferenceReply = 5;
}
