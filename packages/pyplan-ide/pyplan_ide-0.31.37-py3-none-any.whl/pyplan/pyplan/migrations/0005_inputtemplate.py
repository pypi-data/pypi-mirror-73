# Generated by Django 2.2 on 2019-06-04 21:28

from django.db import migrations


def create_preferences(apps, schema_editor):
    PreferenceModule = apps.get_model('pyplan', 'PreferenceModule')
    Preference = apps.get_model('pyplan', 'Preference')

    # DELETE unused preference
    CompanyPreference = apps.get_model('pyplan', 'CompanyPreference')
    CompanyPreference.objects.filter(
        preference__code='input_data_connection_string').delete()
    Preference.objects.filter(code='input_data_connection_string').delete()

    pref_mod = PreferenceModule.objects.get(code='input_data_module')
    pref_mod.delete()


class Migration(migrations.Migration):

    dependencies = [
        ('pyplan', '0002_auto_20181207_1511'),
    ]

    operations = [
        migrations.RunPython(create_preferences),
    ]
