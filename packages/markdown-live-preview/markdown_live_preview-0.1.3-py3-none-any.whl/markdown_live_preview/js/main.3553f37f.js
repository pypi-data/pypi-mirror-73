parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QNUo":[function(require,module,exports) {
"use strict";var t=this&&this.__await||function(e){return this instanceof t?(this.v=e,this):new t(e)},e=this&&this.__asyncGenerator||function(e,r,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=o.apply(e,r||[]),i=[];return n={},u("next"),u("throw"),u("return"),n[Symbol.asyncIterator]=function(){return this},n;function u(t){s[t]&&(n[t]=function(e){return new Promise(function(r,o){i.push([t,e,r,o])>1||c(t,e)})})}function c(e,r){try{(o=s[e](r)).value instanceof t?Promise.resolve(o.value.v).then(p,f):a(i[0][2],o)}catch(n){a(i[0][3],n)}var o}function p(t){c("next",t)}function f(t){c("throw",t)}function a(t,e){t(e),i.shift(),i.length&&c(i[0][0],i[0][1])}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.tiktok=exports.timer=exports.counter=exports.sleep=exports.future=exports.str=exports.id=void 0,exports.id=(t=>t),exports.str=(t=>t.toString()),exports.future=(()=>{let t=void 0,e=void 0;return{promise:new Promise((r,o)=>{t=(t=>r(t)),e=(t=>o(t))}),resolve:t,reject:e}}),exports.sleep=(t=>new Promise(e=>setTimeout(e,t))),exports.counter=(()=>(t=>()=>t+=1)(0)),exports.timer=(()=>{let t=performance.now();return()=>{const e=t;return(t=performance.now())-e}}),exports.tiktok=function(r){return e(this,arguments,function*(){const e=exports.counter();for(;;)yield yield t(e()),yield t(exports.sleep(r))})};
},{}],"Cu3Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.join=exports.chunk=exports.unique_by=exports.sort_by_keys=exports.sort_by=exports.group_by=exports.all=exports.any=exports.interlace=exports.longzip=exports.zip=exports.has=exports.find_by=exports.count_by=exports.reduce=exports.filter=exports.compact_map=exports.flat_map=exports.map=exports.drop=exports.take=exports.enumerate=exports.generate=exports.range=void 0;const o=require("./prelude");exports.range=function*(o,e,t=1){let r=o;const n=t>0?(o,e)=>o<=e:(o,e)=>o>=e;for(;n(r,e);)yield r,r+=t},exports.generate=function*(o,e){for(const t of exports.range(1,e))yield o()},exports.enumerate=function*(o){let e=0;for(const t of o)yield[e,t],e+=1},exports.take=function*(o,e){for(const[t,r]of exports.enumerate(e)){if(t>=o)break;yield r}},exports.drop=function*(o,e){for(const[t,r]of exports.enumerate(e))t>=o&&(yield r)},exports.map=function*(o,e){for(const t of e)yield o(t)},exports.flat_map=function*(o,e){for(const t of e)yield*o(t)},exports.compact_map=function*(o,e){for(const t of e){const e=o(t);void 0!==e&&(yield e)}},exports.filter=function*(o,e){for(const t of e)o(t)&&(yield t)},exports.reduce=((o,e,t)=>{let r=e;for(const n of t)r=o(r,n);return r}),exports.count_by=((o,e)=>exports.reduce((e,t)=>e+o(t),0,e)),exports.find_by=((o,e)=>{for(const t of e)if(o(t))return t}),exports.has=((o,e)=>{for(const t of e)if(o(t))return!0;return!1}),exports.zip=function*(o,e){const[t,r]=[o[Symbol.iterator](),e[Symbol.iterator]()];for(;;){const[o,e]=[t.next(),r.next()];if(o.done||e.done)break;yield[o.value,e.value]}},exports.longzip=function*(o,e){const[t,r]=[o[Symbol.iterator](),e[Symbol.iterator]()];for(;;){const[o,e]=[t.next(),r.next()];if(o.done&&e.done)break;yield[o.value,e.value]}},exports.interlace=function*(o,e){let t=!0;for(const r of e)t||(yield o),yield r,t=!1},exports.any=((o,e)=>{let t=!1;for(const r of e)t=t||o(r);return t}),exports.all=((o,e)=>{let t=!0;for(const r of e)t=t&&o(r);return t}),exports.group_by=((o,e)=>{const t=new Map;for(const r of e){const e=o(r);t.has(e)||t.set(e,[]),t.get(e).push(r)}return t}),exports.sort_by=((o,e)=>{return[...e].sort((e,t)=>o(e)-o(t))}),exports.sort_by_keys=((o,e)=>{return[...e].sort((e,t)=>{const r=exports.zip(o(e),o(t));for(const[o,n]of r)if(o!==n)return o-n;return 0})}),exports.unique_by=function*(o,e){const t=new Set;for(const r of e){const e=o(r);t.has(e)||(yield r),t.add(e)}},exports.chunk=function*(o,e){let t=[];for(const[r,n]of exports.enumerate(e))r%o==0&&0!==r&&(yield t,t=[]),t.push(n);yield t},exports.join=((e,t)=>{let r="";for(const n of exports.interlace(e,exports.map(o.str,t)))r+=n;return r});
},{"./prelude":"QNUo"}],"erOl":[function(require,module,exports) {
"use strict";var e=this&&this.__await||function(t){return this instanceof e?(this.v=t,this):new e(t)},t=this&&this.__asyncGenerator||function(t,o,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,o||[]),a=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(o,n){a.push([e,t,o,n])>1||c(e,t)})})}function c(t,o){try{(n=i[t](o)).value instanceof e?Promise.resolve(n.value.v).then(u,d):l(a[0][2],n)}catch(r){l(a[0][3],r)}var n}function u(e){c("next",e)}function d(e){c("throw",e)}function l(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.download=exports.animation_loop=exports.wait_frame=exports.ready=exports.$$=exports.$=void 0,exports.$=((e,t=document.body)=>{var o;return null!==(o=t.querySelector(e))&&void 0!==o?o:void 0}),exports.$$=((e,t=document.body)=>[...t.querySelectorAll(e)]),exports.ready=(()=>new Promise(e=>document.addEventListener("DOMContentLoaded",e,{once:!0}))),exports.wait_frame=(()=>new Promise(requestAnimationFrame)),exports.animation_loop=function(){return t(this,arguments,function*(){for(;;){const t=yield e(exports.wait_frame());yield yield e(t)}})},exports.download=((e,t="")=>{const o=document.createElement("a");o.style.display="none",o.target="_blank",o.download=t,o.href=e,document.body.append(o),o.click(),o.remove()});
},{}],"ZCfc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("nda/dist/isomorphic/prelude"),o=require("nda/dist/isomorphic/iterator"),e=require("nda/dist/browser/dom"),a=500,i=e.$("#main"),s=async()=>await(await fetch("/api/info")).json(),n=async function*(){const o=`ws://${location.host}/ws`;let e=()=>{},a=new WebSocket(o);const i=()=>{a.onmessage=(({data:t})=>e(t)),a.onclose=(async()=>{await t.sleep(500),a=new WebSocket(o),i()})};for(i();;){const t=new Promise(t=>e=t);yield t}},r=async t=>{const a=await(await fetch("/api/markdown")).text();i.innerHTML=a,await e.wait_frame();const s=e.$$('[diff="true"]'),[n]=o.sort_by(t=>-1*Number(t.attributes.depth.value),s);n&&(n.id="focus",t&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))},c=async()=>{const o=await s();document.title=o.title;await Promise.all([(async()=>{for(;;)try{for await(const t of n())await r(o.follow)}catch(t){console.error(t)}})(),(async()=>{let o=void 0;for await(const a of t.tiktok(500))try{const t=await s();t.sha!==o&&(await r(t.follow),o=t.sha)}catch(e){console.error(e)}})()])};c();
},{"nda/dist/isomorphic/prelude":"QNUo","nda/dist/isomorphic/iterator":"Cu3Y","nda/dist/browser/dom":"erOl"}]},{},["ZCfc"], null)