!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ganttChartD3v2=e():(t.Airflow=t.Airflow||{},t.Airflow.ganttChartD3v2=e())}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}({8:function(t,e){const n={a:"ddd",A:"dddd",b:"MMM",B:"MMMM",c:"lll",d:"DD","-d":"D",e:"D",F:"YYYY-MM-DD",H:"HH","-H":"H",I:"hh","-I":"h",j:"DDDD","-j":"DDD",k:"H",l:"h",m:"MM","-m":"M",M:"mm","-M":"m",p:"A",P:"a",S:"ss","-S":"s",u:"E",w:"d",W:"WW",x:"ll",X:"LTS",y:"YY",Y:"YYYY",z:"ZZ",Z:"z",f:"SSS","%":"%"};moment.fn.strftime=function(t){var e;return e=t.split(/(%\-?.)/).map(function(t){return"%"===t[0]&&n.hasOwnProperty(t.substr(1))?n[t.substr(1)]:t.length>0?"["+t+"]":t}).join(""),this.format(e)},d3.gantt=function(){var t=d3.tip().attr("class","tooltip d3-tip").offset([-10,0]).html(t=>tiTooltip(t,{includeTryNumber:!0})),e={top:20,right:40,bottom:20,left:150},n=220,r="body",a=d3.time.day.offset(new Date,-3),o=d3.time.hour.offset(new Date,3),i="fit",d=[],l=document.body.clientHeight-e.top-e.bottom-5,c=$(".gantt").width()-e.right-e.left-5,u="%H:%M",s=function(t){return t.start_date+t.task_id+t.end_date},f=function(t){return"translate("+(p(t.start_date.valueOf())+n)+","+h(t.task_id)+")"};function m(t){return moment(t).strftime(u)}var p=d3.time.scale().domain([a,o]).range([0,c-n]).clamp(!0),h=d3.scale.ordinal().domain(d).rangeRoundBands([0,l-e.top-e.bottom],.1),g=d3.svg.axis().scale(p).orient("bottom").tickFormat(m).tickSubdivide(!0).tickSize(8).tickPadding(8),b=d3.svg.axis().scale(h).orient("left").tickSize(0),v=function(t){if("fit"===i){if(void 0===t||t.length<1)return a=d3.time.day.offset(new Date,-3),void(o=d3.time.hour.offset(new Date,3));t.forEach(t=>{t.start_date instanceof moment||(t.start_date=moment(t.start_date)),t.end_date instanceof moment||(t.end_date=moment(t.end_date))}),o=moment.max(t.map(t=>t.end_date)).valueOf(),a=moment.min(t.map(t=>t.start_date)).valueOf()}},y=function(){p=d3.time.scale().domain([a,o]).range([0,c-n]).clamp(!0),h=d3.scale.ordinal().domain(d).rangeRoundBands([0,l-e.top-e.bottom],.1),g=d3.svg.axis().scale(p).orient("bottom").tickFormat(m).tickSubdivide(!0).tickSize(8).tickPadding(8),b=d3.svg.axis().scale(h).orient("left").tickSize(0)};function _(a){v(a),y();var o=d3.select(r).append("svg").attr("class","chart").attr("width",c+e.left+e.right).attr("height",l+e.top+e.bottom).append("g").attr("class","gantt-chart").attr("width",c+e.left+e.right).attr("height",l+e.top+e.bottom).attr("transform","translate("+e.left+", "+e.top+")");return o.selectAll(".chart").data(a,s).enter().append("rect").on("mouseover",t.show).on("mouseout",t.hide).on("click",function(t){call_modal(t.task_id,t.execution_date,t.extraLinks)}).attr("class",function(t){return t.state||"null"}).attr("y",0).attr("transform",f).attr("height",function(t){return h.rangeBand()}).attr("width",function(t){return d3.max([p(t.end_date.valueOf())-p(t.start_date.valueOf()),1])}),o.append("g").attr("class","x axis").attr("transform","translate("+n+", "+(l-e.top-e.bottom)+")").transition().call(g),o.append("g").attr("class","y axis").transition().attr("transform","translate("+n+", 0)").call(b),o.call(t),_}return _.redraw=function(t){v(t),y();var e=d3.select(".chart"),n=e.select(".gantt-chart").selectAll("rect").data(t,s);return n.enter().insert("rect",":first-child").attr("rx",5).attr("ry",5).attr("class",function(t){return t.state||"null"}).transition().attr("y",0).attr("transform",f).attr("height",function(t){return h.rangeBand()}).attr("width",function(t){return d3.max([p(t.end_date.valueOf())-p(t.start_date.valueOf()),1])}),n.exit().remove(),e.select(".x").transition().call(g),e.select(".y").transition().call(b),_},_.margin=function(t){return arguments.length?(e=t,_):e},_.timeDomain=function(t){return arguments.length?(a=+t[0],o=+t[1],_):[a,o]},_.timeDomainMode=function(t){return arguments.length?(i=t,_):i},_.taskTypes=function(t){return arguments.length?(d=t,_):d},_.width=function(t){return arguments.length?(c=+t,_):c},_.height=function(t){return arguments.length?(l=+t,_):l},_.tickFormat=function(t){return arguments.length?(u=t,_):u},_.selector=function(t){return arguments.length?(r=t,_):r},_}}})});